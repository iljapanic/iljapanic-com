{% for book in booksBeletry|sort(false, true, 'year') %}
	<article class="item item__book beletry" data-book-id="{{ loop.index }}" data-aos="fade-up" data-aos-duration="800">
    <div class="item__meta">{{book.year}}</div>
		<a href="{{book.goodreads}}" target="_blank">
			<img src="{{book.image}}" alt="{{book.title}}">
		</a>
    <h2 class="item__title">{{book.title}}</h2>
	</article>
{% endfor %}

<script type="text/javascript">

  var screenWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);

  var screenIsMobile = screenWidth < 768;
  var screenIsTablet = screenWidth < 1024;
  var screenIsDesktop = screenWidth > 1024;

  var bookBreakMobile = 4;
  var bookBreakTablet = 5;
  var bookBreakDesktop = 6;

  var book = document.getElementsByClassName('beletry');
  var bookIndex = 0;

  Array.prototype.forEach.call(book, function(el, index, array) {
    bookIndex ++;

    if (screenIsMobile) {
      if (bookIndex == bookBreakMobile) {
        bookIndex = 1;
      }
      var bookDelay = bookIndex + '00';
      el.setAttribute('data-aos-delay', bookDelay);
    }
    else if (screenIsTablet) {
      if (bookIndex == bookBreakTablet) {
        bookIndex = 1;
      }
      var bookDelay = bookIndex + '00';
      el.setAttribute('data-aos-delay', bookDelay);
    }
    else if (screenIsDesktop) {
      if (bookIndex == bookBreakDesktop) {
        bookIndex = 1;
      }
      var bookDelay = bookIndex + '00';
      el.setAttribute('data-aos-delay', bookDelay);
    }
  });

</script>
