---
import DefaultLayout from '@layouts/DefaultLayout.astro'
import Headline from '@components/Headline.astro'
let allPosts = await Astro.glob('../data/notes/*.mdx')
allPosts = allPosts.filter(function (post) {
  return !post.frontmatter.draft
})
allPosts = allPosts.sort(
  (a, b) =>
    new Date(b.frontmatter.publishDate).valueOf() -
    new Date(a.frontmatter.publishDate).valueOf(),
)

const title = 'Digital Garden ðŸŒ±'
const summary =
  'A loosely tended collection of living notes, concepts, and half-baked ideas'
---

<DefaultLayout title={title} description={summary}>
  <Headline title={title} summary={summary} />

  <section class="mt-12">
    {
      allPosts.map((post, index) => {
        const href = `/${post.file.split('/').pop().split('.').shift()}`

        return (
          <article>
            <h2 class="text-base mt-8">
              <a href={href} class="no-underline">
                {post.frontmatter.title}
              </a>
            </h2>
          </article>
        )
      })
    }
  </section>
</DefaultLayout>
